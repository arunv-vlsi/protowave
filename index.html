<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProtocolWave - Waveform Generator</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>

    <header>
        <h1>ProtocolWave</h1>
        <p>A Visual Protocol Waveform Generator</p>
    </header>

    <main>
        <section class="controls">
            <div class="control-group">
                <label for="protocol-select">Protocol</label>
                <select id="protocol-select">
                    <option value="uart">UART</option>
                    <option value="i2c">I2C</option>
                    <option value="spi">SPI</option>
                    <option value="pcie">PCIe (TLP View)</option>
                </select>
            </div>

            <div id="waveform-controls" class="control-row">
                <div class="control-group">
                    <label>Data Format</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="format-toggle" class="toggle-input">
                        <label for="format-toggle" class="toggle-label">
                            <span class="toggle-text left">Binary</span>
                            <span class="toggle-text right">Hex</span>
                        </label>
                    </div>
                </div>
                <div class="control-group data-input-group">
                    <label for="data-input">Input Data</label>
                    <input type="text" id="data-input" placeholder="e.g., 10110101">
                </div>
            </div>

            <div id="pcie-controls" class="control-row hidden">
                <div class="control-group">
                    <label for="pcie-address">Memory Address (Hex)</label>
                    <input type="text" id="pcie-address" value="DEADBEEF">
                </div>
                <div class="control-group data-input-group">
                    <label for="pcie-data">Data Payload (Hex, up to 16 bytes)</label>
                    <input type="text" id="pcie-data" value="F1F2F3F4">
                </div>
            </div>

            <button id="generate-btn">Generate</button>
        </section>

        <section id="waveform-display" class="display-container">
            <canvas id="waveformCanvas" width="1200" height="600"></canvas>
            <div id="placeholder-text">
                <h2>Your Visualization Appears Here</h2>
                <p>Select a protocol, enter your data, and click 'Generate' to begin.</p>
            </div>
             <div id="error-message" class="hidden"></div>
        </section>

        <section id="pcie-display" class="display-container hidden">
            <h3>Memory Write Transaction Layer Packet (TLP)</h3>
            <div id="tlp-container">
                </div>
            <p class="tlp-note">This is a simplified representation of a 3DW (3 Double Word) Header + Data Payload.</p>
        </section>

        <section class="info-section">
            <h3>About ProtocolWave</h3>
            <p>This tool visualizes digital communication protocols. For UART, I2C, and SPI, it generates a physical signal waveform. For PCIe, it shows a higher-level view by constructing a **Transaction Layer Packet (TLP)**, as the physical signal is too complex to be represented meaningfully in this format.</p>
        </section>
    </main>

    <footer>
        <p>Created for educational purposes.</p>
    </footer>

    <script src="script.js"></script>
</body>
</html>
